# Final Step: Deploy to Kubernetes with Automation Script
**Series:** DevOps for Lazy People

## üìã Overview

Deploy your entire Flask application to Kubernetes with a single PowerShell script. This automation script handles cluster verification, image pulling, manifest deployment, and port forwarding‚Äîall the manual steps now happen automatically with one command.

<p align="center">
  <img src="https://github.com/codewithmonil/Devops-Magic/blob/main/Project-Architecture.jpg?raw=true" alt="Project Architecture">
</p>

## üéØ What deploy.ps1 Does

The deployment script automates the entire Kubernetes deployment process in **6 steps**:

1. **Cluster Verification**: Checks if your kind cluster exists, creates it if not
2. **Image Pull Simulation**: Confirms latest Docker image is ready from Docker Hub
3. **Manifest Deployment**: Applies all Kubernetes manifests (deployment, service, configmap)
4. **Rollout Wait**: Monitors deployment until pods are healthy and ready
5. **Status Display**: Shows running pods and services
6. **Port Forwarding**: Automatically forwards traffic so you can access the app at localhost:30000

Think of it as your one-click deployment button‚Äîeverything from cluster setup to app access in a single script.

## üìù The Deployment Script

**View the complete deployment script here:**  
üëâ [deploy.ps1](https://github.com/codewithmonil/Devops-Magic/blob/main/deploy.ps1)

## üöÄ How to Use

### Run the Deployment Script
```powershell
# Make sure you're in your project directory
cd your-project

# Run the deployment script
.\deploy.ps1
```

### What You'll See
```
========================================
  DevOps Magic - Kubernetes Deployment
========================================

[1/6] Checking kind cluster...
      Cluster is running!

[2/6] Pulling latest image from Docker Hub...
      Image: monil08/netflix-ka-bhai:by-githb-actions
      Image ready!

[3/6] Deploying to Kubernetes...
configmap/flask-config created
deployment.apps/flask-app created
service/flask-service created

[4/6] Waiting for pods to be ready...
deployment "flask-app" successfully rolled out

[5/6] Deployment Status
----------------------------------------
NAME                         READY   STATUS    RESTARTS   AGE
flask-app-xxxxxxxxxx-xxxxx   1/1     Running   0          30s
flask-app-xxxxxxxxxx-xxxxx   1/1     Running   0          30s

NAME             TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
flask-service    NodePort   10.96.xxx.xxx   <none>        80:30000/TCP   30s

========================================
  DEPLOYMENT SUCCESSFUL!
========================================

Starting port-forward to access the app...

   Your app will be available at: http://localhost:30000
   Press Ctrl+C to stop port-forwarding and exit

[6/6] Starting port-forward now...

Forwarding from 127.0.0.1:30000 -> 80
Forwarding from [::1]:30000 -> 80
```

### Access Your Application
```powershell
# Open browser or use curl
curl http://localhost:30000

# Or open in browser
start http://localhost:30000
```

### Stop the Script
```powershell
# Press Ctrl+C in the PowerShell window
# This stops port-forwarding and exits the script
```



```
### Cleanup After Testing

# Delete the cluster
kind delete cluster --name devops-demo
```

### Redeploy (if you make changes)
```powershell
# Just run the script again
.\deploy.ps1
```

## Important Note: Local vs Production

**This is a local development setup using kind (Kubernetes in Docker).**

In actual companies, deployments work differently:

### Local (What We're Doing)
- kind cluster runs on your laptop
- Manual script execution (deploy.ps1)
- Perfect for learning and testing

### Production (What Companies Do)
- **Managed Kubernetes clusters** (AWS EKS, Google GKE, Azure AKS)
- **Full automation via CI/CD pipelines**
- LoadBalancers and Ingress for traffic
- Multi-node clusters with autoscaling
- **Zero manual intervention**

All of this happens without anyone touching a server or running a script. That's the real power of DevOps.

**Made with ‚ù§Ô∏è for lazy people who want deployment automation that just works**

This project is part of the DevOps for Lazy People series. Feel free to use, modify, and share!
